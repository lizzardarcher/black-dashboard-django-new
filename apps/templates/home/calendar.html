{% extends 'layouts/base.html' %}

{#<link href="/static/assets/css/calendar.css" rel="stylesheet"/>#}


{% block content %}


    <style>
        td:hover {
            background-color: #381d32;
        }

        td {
            background-color: #39203e;
            vertical-align: top;
            text-align: left;
            padding: 5px;
        }


    </style>
    <div class="container">
        <h2>Расписание постов</h2>
        <table>
            <tr>
                <td><a id="back" href="" onmouseover="calendarBackBtn()">
                    <button class="button btn-primary rounded"><<< Пред. месяц</button>
                </a>
                </td>
                <td><a id="current" href="" onmouseover="calendarCurrentBtn()">
                    <button class="button btn-primary rounded">>> Текущая дата <<</button>
                </a>
                </td>
                <td><a id="forward" href="" onmouseover="calendarForwardBtn()">
                    <button class="button btn-primary rounded">След. месяц >>></button>
                </a>
                </td>
            </tr>
        </table>
        {{ cal|safe }}
    </div>

    <script>
        function calendarBackBtn() {
            let year = parseInt(window.location.pathname.split('/')[2])
            let month = parseInt(window.location.pathname.split('/')[3]) - 1
            if (month === 0) {
                year = year - 1
                month = 12
            }
            let back_btn = document.getElementById('back');
            back_btn.setAttribute('href', `/calendar/${year}/${month}/`)
        }

        function calendarForwardBtn() {
            let fyear = parseInt(window.location.pathname.split('/')[2])
            let fmonth = parseInt(window.location.pathname.split('/')[3]) + 1
            if (fmonth === 13) {
                console.log(fmonth)
                fyear = fyear + 1
                fmonth = 1
            }
            let back_btn = document.getElementById('forward');
            back_btn.setAttribute('href', `/calendar/${fyear}/${fmonth}/`)
        }

        function calendarCurrentBtn() {
            let today = new Date();
            let cmonth = String(today.getMonth() + 1).padStart(2, '0');
            let cyear = today.getFullYear();
            let back_btn = document.getElementById('current');
            back_btn.setAttribute('href', `/calendar/${cyear}/${cmonth}/`)
        }
    </script>

{% endblock content %}